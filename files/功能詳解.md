# 📚 Claude Chat Ultimate - 功能詳解

這份文檔詳細介紹每個功能的使用方法和技巧。

---

## 📑 目錄

1. [界面佈局](#界面佈局)
2. [API設置](#api設置)
3. [對話功能](#對話功能)
4. [多模態輸入](#多模態輸入)
5. [知識庫系統](#知識庫系統)
6. [主題與個性化](#主題與個性化)
7. [對話管理](#對話管理)
8. [成本優化](#成本優化)
9. [高級功能](#高級功能)

---

## 界面佈局

### 主界面組成

```
頂部工具欄
├── 字體大小選擇器
├── 主題選擇器
├── 背景設置按鈕
├── 聯網開關
├── 導出按鈕
└── 總結按鈕

左側面板 (可調整寬度)
├── API設置標籤
├── 知識庫標籤
└── 個性化標籤

右側主區域
├── 對話顯示區
├── 圖片預覽區
├── 輸入控制按鈕
├── 消息輸入框
└── 統計信息欄
```

### 可調整元素
- 左右面板比例可以拖動調整
- 窗口大小可以任意調整
- 字體大小有三檔可選

---

## API設置

### OpenRouter API Key

**獲取API Key:**
1. 訪問 [openrouter.ai](https://openrouter.ai/)
2. 註冊並登錄
3. 進入 Keys 頁面
4. 創建新的API Key
5. 複製Key(格式: `sk-or-v1-...`)

**配置步驟:**
1. 打開程序
2. 左側面板選擇"API設置"標籤
3. 在"OpenRouter API Key"輸入框粘貼Key
4. 點擊"💾 保存配置"

**安全提示:**
- API Key會保存在本地配置文件
- 不要分享你的API Key
- 定期檢查OpenRouter使用情況

### System Prompt設置

**作用:**
- 定義AI的角色和行為
- 設置回答的風格和格式
- 提供背景知識和上下文
- **重點:這部分會被緩存,節省90%成本**

**優秀示例:**

#### 示例1:通用助手
```
你是一個專業、友好的AI助手。
特點:
- 回答詳細、準確
- 使用繁體中文
- 提供代碼示例時包含註釋
- 必要時提供多個解決方案
```

#### 示例2:編程助手
```
你是一個經驗豐富的軟件工程師。
專長:Python、JavaScript、系統設計
風格:
- 代碼簡潔、有註釋
- 解釋技術原理
- 提供最佳實踐
- 指出潛在問題
```

#### 示例3:學習導師
```
你是一個耐心的教育者。
特點:
- 從基礎概念講起
- 使用類比和例子
- 鼓勵提問
- 提供練習建議
- 用繁體中文教學
```

**技巧:**
- 越詳細越好,因為會被緩存
- 把常用的指令都放進去
- 包含你希望AI記住的背景信息

---

## 對話功能

### 基礎對話

**發送消息:**
- 方法1: 點擊"🚀 發送"按鈕
- 方法2: 按 `Ctrl+Enter`

**消息格式:**
- 純文本消息
- 可以包含多行
- 支持中英文混合

**對話歷史:**
- 自動保存在內存中
- 保持上下文連續性
- 可以引用之前的對話

### Markdown渲染

程序自動渲染Markdown格式:

**標題:**
```markdown
# 一級標題
## 二級標題
### 三級標題
```

**代碼塊:**
````markdown
```python
def hello():
    print("Hello World")
```
````

**行內代碼:**
```markdown
使用 `print()` 函數輸出
```

**列表:**
```markdown
- 項目1
- 項目2
  - 子項目
```

**文本樣式:**
```markdown
**加粗文字**
*斜體文字*
```

---

## 多模態輸入

### 圖片上傳

**支持格式:**
- PNG - 推薦,無損格式
- JPG/JPEG - 常見照片格式
- GIF - 動圖(只顯示首幀)
- BMP - Windows位圖
- WebP - 現代圖片格式

**使用步驟:**
1. 點擊"📎 圖片"按鈕
2. 選擇一個或多個圖片
3. 預覽區會顯示縮略圖
4. 輸入相關問題
5. 發送消息

**實用場景:**

**場景1:圖片識別**
```
[上傳圖片]
問:這張圖片裡有什麼?請詳細描述。
```

**場景2:圖片分析**
```
[上傳圖表]
問:分析這個圖表的趨勢和關鍵數據點。
```

**場景3:視覺問答**
```
[上傳截圖]
問:這個錯誤信息是什麼意思?如何解決?
```

**場景4:多圖比較**
```
[上傳多張圖片]
問:比較這幾張圖片的差異。
```

**技巧:**
- 圖片質量越高,識別越準確
- 文字描述配合圖片效果更好
- 可以在一條消息中上傳多張圖片

### PDF文檔上傳

**功能:**
- 自動提取PDF文本內容
- 添加到知識庫
- 後續對話可檢索

**使用流程:**
1. 點擊"📄 文檔"按鈕
2. 選擇PDF文件
3. 程序自動提取文本
4. 確認添加到知識庫

**適用場景:**
- 學術論文閱讀
- 技術文檔查詢
- 報告分析
- 合同審查

**注意事項:**
- 需要安裝 `PyPDF2` 庫
- 掃描版PDF可能無法提取文字
- 圖片密集的PDF效果較差

### Word文檔上傳

**支持格式:**
- .docx - Office 2007及以後
- 不支持 .doc (舊版格式)

**功能:**
- 提取文檔文字
- 保留基本格式
- 添加到知識庫

**使用方法:**
與PDF類似,選擇.docx文件即可

**應用場景:**
- 工作文檔整理
- 會議記錄查詢
- 項目文檔檢索

---

## 知識庫系統

### 什麼是知識庫?

知識庫是一個本地文檔管理系統,可以:
- 存儲各種文檔
- 快速檢索內容
- 自動關聯相關信息
- 增強AI的回答能力

### 添加文檔

**方法1:上傳文件**
1. 點擊"📄 文檔"按鈕(右側主區域)
2. 選擇文件(PDF/Word/TXT/MD)
3. 自動提取並添加

**方法2:手動添加**
1. 切換到"知識庫"標籤
2. 點擊"📄 添加文檔"
3. 輸入文檔名和內容
4. 保存

**支持格式:**
- .txt - 純文本
- .md - Markdown文件
- .pdf - PDF文檔(需PyPDF2)
- .docx - Word文檔(需python-docx)

### 搜索文檔

**測試搜索:**
1. 切換到"知識庫"標籤
2. 點擊"🔍 測試搜索"
3. 輸入關鍵詞
4. 查看匹配結果

**搜索原理:**
- 關鍵詞匹配
- 提取相關片段
- 按相關度排序
- 顯示上下文

**搜索技巧:**
- 使用具體的專業術語
- 組合多個關鍵詞
- 嘗試同義詞

### 自動檢索

**工作流程:**
1. 你發送一條消息
2. 系統自動搜索知識庫
3. 找到相關文檔片段
4. 作為上下文提供給AI
5. AI基於這些信息回答

**示例:**

假設知識庫有文檔 `company_policy.txt`:
```
員工福利:
- 年假15天
- 彈性工時
- 遠程辦公
```

**對話:**
```
你: 公司的年假政策是什麼?

[系統自動檢索到相關內容]

Claude: 根據公司政策文檔,員工享有15天年假...
```

### 管理知識庫

**查看文檔列表:**
- 切換到"知識庫"標籤
- 列表顯示所有文檔

**刷新列表:**
- 點擊"🔄 刷新"按鈕

**文檔存儲位置:**
```
程序目錄/
└── knowledge_base/
    ├── doc1.txt
    ├── doc2.md
    └── report.pdf.txt (PDF提取的文本)
```

---

## 主題與個性化

### 主題切換

**可選主題:**

#### Light主題
- 明亮背景
- 適合白天使用
- 減少眼睛疲勞

#### Dark主題
- 深色背景
- 護眼舒適
- 適合夜間使用
- **推薦**

#### Monokai主題
- 經典程序員主題
- 高對比度
- 代碼顯示友好

**切換方法:**
- 頂部工具欄 → 主題下拉菜單
- 選擇主題
- 立即生效

### 字體調整

**可選大小:**
- Small - 小字體,適合小屏幕
- Medium - 中等字體,**推薦**
- Large - 大字體,適合大屏幕

**影響範圍:**
- 對話文字
- 代碼塊
- 標題
- 列表

### 自定義名字

**設置步驟:**
1. 切換到"個性化"標籤
2. 修改"你的名字"
3. 修改"AI助手名字"
4. 點擊"✅ 應用設置"

**效果:**
```
Ciela: 你好
Claude: 你好,Ciela!
```

### 背景壁紙

**設置背景:**
1. 點擊"🖼️ 背景"按鈕
2. 選擇圖片文件
3. 調整透明度(在"個性化"標籤)
4. 應用設置

**推薦設置:**
- 透明度: 0.2-0.4
- 使用淺色圖片
- 避免過於花哨的圖案

**注意:**
- 需要 Pillow 庫
- 圖片會影響文字可讀性
- 建議使用簡潔的背景

---

## 對話管理

### 清空對話

**何時使用:**
- 開始新話題
- 對話過長影響性能
- 重置上下文

**操作:**
1. 點擊"🔄 清空對話"
2. 確認操作
3. 對話歷史清除

**注意:**
- 操作不可撤銷
- 建議先導出重要對話

### 對話總結

**功能:**
- 智能壓縮長對話
- 提取關鍵信息
- 節省token成本

**使用場景:**
- 對話超過10輪
- Token消耗過高
- 需要簡化上下文

**操作流程:**
1. 點擊"📝 總結"按鈕
2. 等待AI生成總結
3. 查看總結內容
4. 選擇是否用總結替換歷史

**替換歷史:**
- 優點:大幅減少token
- 缺點:丟失詳細內容
- 建議:先導出原對話

**總結示例:**

**原對話(100+輪):**
```
用戶問了關於Python的各種問題...
AI逐一解答...
```

**總結(3輪):**
```
用戶: 請總結我們之前的對話

Claude: 我們討論了以下主題:
1. Python基礎語法
2. 列表和字典操作
3. 文件處理方法
主要要點是...
```

### 導出對話

**支持格式:**

#### Markdown (.md)
- 純文本格式
- 易於編輯
- 保留結構
- 適合存檔

**適用場景:**
- 需要後續編輯
- 發布到博客
- 版本控制

#### HTML (.html)
- 帶樣式網頁
- 可直接瀏覽
- 保留格式
- 方便分享

**適用場景:**
- 直接分享
- 在瀏覽器查看
- 打印輸出

#### JSON (.json)
- 完整數據
- 包含統計信息
- 可程序處理
- 用於備份

**適用場景:**
- 數據分析
- 程序處理
- 完整備份

**導出步驟:**
1. 點擊"📥 導出"
2. 選擇格式
3. 選擇保存位置
4. 確認保存

---

## 成本優化

### Prompt Caching原理

**什麼是Prompt Caching?**
- 緩存System Prompt
- 緩存持續5分鐘
- 讀取緩存成本降低90%

**成本對比:**
| 類型 | 原價 | 緩存讀取 | 節省 |
|------|------|----------|------|
| Input | $3/M | $0.30/M | 90% |
| Output | $15/M | $15/M | 0% |

**最佳實踐:**

#### 1. 充分利用System Prompt
```
# 不推薦:簡短的System Prompt
你是AI助手

# 推薦:詳細的System Prompt
你是一個專業的AI助手。

背景知識:
- [大量背景信息]
- [常用指令]
- [專業術語解釋]

這些內容會被緩存,反復使用成本極低!
```

#### 2. 保持對話連續
- 緩存持續5分鐘
- 連續對話自動延續緩存
- 避免頻繁開關程序

#### 3. 適時總結對話
- 對話>10輪考慮總結
- 總結內容更精簡
- 大幅減少input tokens

### 統計信息解讀

**底部統計欄顯示:**
```
💰 總成本: $0.0523 | 💸 節省: $0.0178 (34%) | 
📊 Input: 1250 | Output: 650 | Cache: 980
```

**各項含義:**
- **總成本** - 實際花費金額
- **節省** - 相比不使用緩存節省的錢
- **Input** - 發送的token數
- **Output** - 接收的token數
- **Cache** - 從緩存讀取的token數

### 成本計算公式

```
總成本 = 
  (Input Tokens × $3/M) +
  (Output Tokens × $15/M) +
  (Cache Write Tokens × $3.75/M) +
  (Cache Read Tokens × $0.30/M)

節省 = 
  (不使用緩存成本) - (實際成本)
```

### 實際案例

**場景:每天50次對話**

配置:
- System Prompt: 2000 tokens
- 平均用戶消息: 50 tokens
- 平均AI回覆: 200 tokens

**不使用緩存(每月):**
```
Input: 50次×30天×(2000+50) = 3,075,000 tokens
Output: 50次×30天×200 = 300,000 tokens
成本: 3.075×$3 + 0.3×$15 = $13.73
```

**使用緩存(每月):**
```
Cache Write(首次): 2000 tokens
Cache Read(後續): 50次×30天×2000 = 3,000,000 tokens
Input: 50次×30天×50 = 75,000 tokens
Output: 同上 = 300,000 tokens

成本: 
  0.002×$3.75 (cache write) +
  3×$0.30 (cache read) +
  0.075×$3 (input) +
  0.3×$15 (output)
= $0.0075 + $0.90 + $0.225 + $4.5
= $5.63
```

**每月節省: $13.73 - $5.63 = $8.10 (59%)**

---

## 高級功能

### 聯網查詢

**功能說明:**
- 啟用後AI可以搜索實時信息
- 獲取最新數據
- 驗證事實

**使用方法:**
1. 點擊"🌐 聯網"按鈕
2. 狀態顯示"聯網: 開啟"
3. 發送需要實時信息的問題

**應用場景:**
```
問: 今天的天氣如何?
問: 最新的iPhone是哪一款?
問: 某某股票現在的價格?
```

**注意事項:**
- 需要AI支持聯網功能
- 可能增加響應時間
- 增加token消耗

### 批量處理

**處理多個文檔:**
1. 添加多個文檔到知識庫
2. 一次性提問
3. AI會綜合所有相關內容回答

**示例:**
```
知識庫有:
- Q1_report.pdf
- Q2_report.pdf
- Q3_report.pdf

問: 分析全年的銷售趨勢
[AI會檢索所有季度報告]
```

### 高級System Prompt技巧

**條件指令:**
```
如果用戶問及代碼:
- 提供完整代碼
- 包含詳細註釋
- 說明運行方法

如果用戶問及概念:
- 由淺入深解釋
- 提供實例
- 推薦學習資源
```

**角色扮演:**
```
你是[具體角色],有以下特徵:
性格: [詳細描述]
專長: [列舉專業領域]
風格: [回答風格]
禁忌: [不應該做的事]
```

**輸出格式控制:**
```
所有代碼必須:
1. 使用Python 3.8+語法
2. 包含類型提示
3. 添加文檔字符串
4. 遵循PEP 8規範

回答結構:
1. 簡短總結
2. 詳細解釋
3. 代碼示例
4. 注意事項
```

---

## 🎯 最佳實踐總結

### 日常使用

1. **啟動程序**
2. **檢查API設置**
3. **根據任務選擇功能**
   - 純對話 → 直接使用
   - 需要圖片 → 上傳圖片
   - 需要文檔 → 添加到知識庫
4. **保持對話連續(利用緩存)**
5. **定期總結長對話**
6. **及時導出重要內容**

### 成本控制

1. **充分利用System Prompt**
2. **保持5分鐘內連續對話**
3. **及時總結長對話**
4. **只在需要時上傳圖片**

### 知識庫管理

1. **分類存儲文檔**
2. **使用描述性文件名**
3. **定期測試搜索效果**
4. **刪除過時內容**

---

**以上就是所有功能的詳細說明!** 🎉

如有疑問,隨時查閱這份文檔!
